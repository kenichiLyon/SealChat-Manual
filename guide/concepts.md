# 核心概念

理解 SealChat 的核心概念，帮助你更好地使用和管理平台。

---

## 组织结构

SealChat 采用**三层组织结构**：

```
世界（World）
  └── 频道（Channel）
        └── 消息（Message）
```

### 层级说明

| 层级 | 类比 | 用途 |
|------|------|------|
| **世界** | Discord 服务器 / Slack 工作区 | 最大的组织单位，包含多个频道 |
| **频道** | Discord 频道 / 聊天房间 | 特定话题的讨论空间 |
| **消息** | 聊天消息 | 具体的交流内容 |

### 典型使用场景

**跑团团队**：
```
[跑团世界] ← 世界
  ├── 大厅           ← 通用讨论
  ├── 角色扮演       ← IC（角色扮演）区
  ├── 闲聊           ← OOC（跳出角色）区
  ├── 资料区         ← 规则书、设定
  └── 骰子测试       ← 测试骰子
```

---

## 世界（World）

### 什么是世界？

世界是 SealChat 的最顶层组织单位。每个世界是一个独立的空间，拥有独立的成员、频道和权限设置。

### 世界类型

| 类型 | 说明 | 适用场景 |
|------|------|----------|
| **私有世界** | 需要邀请链接才能加入 | 跑团、私密团队 |
| **公开世界** | 任何人都可以搜索并加入 | 开放社区 |

### 世界属性

| 属性 | 说明 |
|------|------|
| 名称 | 世界的显示名称 |
| 描述 | 世界的简介 |
| 图标 | 世界的头像图片 |
| 公开状态 | 公开或私有 |
| 创建时间 | 世界创建的时间 |
| 成员数 | 当前成员数量 |

### 默认大厅

创建世界时，系统会自动创建一个"大厅"频道作为默认入口。

### 世界管理

世界创建者默认是世界管理员，可以：

- 编辑世界信息
- 管理频道
- 管理成员权限
- 生成邀请链接
- 转让管理权
- 删除世界

---

## 频道（Channel）

### 什么是频道？

频道是世界内的聊天空间，成员在频道中发送和接收消息。

### 频道特性

| 特性 | 说明 |
|------|------|
| **层级结构** | 频道可以嵌套，形成父子关系 |
| **独立权限** | 每个频道可以有独立的权限设置 |
| **身份卡绑定** | 成员可以在不同频道使用不同身份卡 |
| **专属功能** | 骰子宏、iForm 表单等可按频道配置 |

### 频道层级

```
[战役主频道]
  ├── [第一章]
  │     ├── 场景1
  │     └── 场景2
  ├── [第二章]
  └── [休息区]
```

### 频道设置

| 设置项 | 说明 |
|--------|------|
| 频道名称 | 显示名称 |
| 频道描述 | 频道的用途说明 |
| 权限设置 | 谁可以查看、发言、管理 |
| 骰子宏 | 该频道可用的骰子宏 |
| iForm | 嵌入的表单配置 |
| 便签 | 频道顶部的公告内容 |

---

## 身份卡（Identity Card）

### 什么是身份卡？

身份卡是 SealChat 最具特色的功能之一。它允许用户在频道中以不同的"身份"发言，每个身份卡拥有独立的昵称、头像和描述。

### 身份卡用途

| 场景 | 说明 |
|------|------|
| **角色扮演** | 为你扮演的每个角色创建一张身份卡 |
| **主持人模式** | 使用专门的"主持人"身份卡发言 |
| **NPC 发言** | 主持人可以用 NPC 身份卡模拟 NPC 对话 |
| **匿名发言** | 使用匿名身份卡保护隐私 |

### 身份卡属性

| 属性 | 说明 | 示例 |
|------|------|------|
| 昵称 | 身份卡的显示名称 | "艾露莎·月影" |
| 头像 | 身份卡的头像图片 | 角色立绘 |
| 描述 | 角色的简介或备注 | "精灵法师，擅长冰系魔法" |
| 权限 | 该身份卡的权限范围 | 发言权、编辑权 |

### 身份卡管理

**创建身份卡**：
1. 进入频道设置
2. 选择"身份卡管理"
3. 点击"创建身份卡"
4. 填写昵称、上传头像、添加描述

**切换身份卡**：
1. 在消息输入框旁边找到身份卡选择器
2. 点击选择要使用的身份卡
3. 之后发送的消息将以该身份卡身份发出

**身份卡分组**：
- 可以创建文件夹对身份卡进行分组
- 便于管理大量角色（如主持人的 NPC 库）

### 示例：跑团场景

```
玩家 A 的身份卡：
├── [我自己]       ← OOC 发言时使用
└── [艾露莎]       ← IC 发言时使用

主持人的身份卡：
├── [主持人]       ← 系统说明、规则解释
├── [商人 NPC]     ← 扮演商人
├── [酒馆老板]     ← 扮演酒馆老板
└── [神秘旅者]     ← 扮演重要 NPC
```

---

## 权限系统

### 权限模型

SealChat 采用基于 **RBAC（角色访问控制）** 的细粒度权限系统。

### 权限层级

```
系统级权限
  └── 世界级权限
        └── 频道级权限
              └── 身份卡级权限
```

### 常见权限

| 权限 | 说明 |
|------|------|
| **查看频道** | 是否能看到该频道 |
| **发送消息** | 是否能在频道发言 |
| **编辑消息** | 是否能编辑自己的消息 |
| **删除消息** | 是否能删除消息 |
| **管理成员** | 是否能管理频道成员 |
| **管理频道** | 是否能编辑频道设置 |
| **管理世界** | 是否能编辑世界设置 |
| **生成邀请** | 是否能创建邀请链接 |

### 角色类型

| 角色 | 权限范围 | 说明 |
|------|----------|------|
| **系统管理员** | 全局 | 管理所有世界、用户、Bot |
| **世界管理员** | 单个世界 | 管理该世界的所有设置 |
| **频道管理员** | 单个频道 | 管理该频道的设置和成员 |
| **普通成员** | 有限 | 按配置的权限操作 |

---

## 消息类型

### 基础消息

| 类型 | 说明 |
|------|------|
| **文本消息** | 普通文字消息，支持富文本格式 |
| **附件消息** | 包含文件附件的消息 |
| **图库消息** | 引用图库图片的消息 |
| **音频消息** | 包含音频的消息 |

### 特殊标记

SealChat 支持消息的特殊标记，用于区分不同性质的发言：

| 标记 | 全称 | 说明 | 显示效果 |
|------|------|------|----------|
| **IC** | In Character | 角色扮演中的发言 | 正常显示 |
| **OOC** | Out of Character | 跳出角色的发言 | 斜体/括号包围 |

### OOC/IC 标记使用

**什么时候用 OOC？**
- 讨论规则
- 询问主持人
- 玩家间的闲聊
- 对游戏的评论

**什么时候用 IC？**
- 角色对话
- 角色行动描述
- 角色内心独白

**如何标记？**
- 在消息输入框中选择 OOC/IC 模式
- 或使用快捷语法：`((这是 OOC 内容))`

### 悄悄话

悄悄话是只有特定用户能看到的消息，其他人无法查看。

**使用场景**：
- 主持人给某个玩家的私密信息
- 角色间的私语
- 隐骰结果

**如何发送**：
1. 点击消息输入框的"悄悄话"按钮
2. 选择能看到这条消息的用户
3. 输入内容并发送

---

## 术语表

| 术语 | 英文 | 说明 |
|------|------|------|
| 世界 | World | 最大的组织单位 |
| 频道 | Channel | 世界内的聊天空间 |
| 身份卡 | Identity Card | 用户在频道中的虚拟身份 |
| OOC | Out of Character | 跳出角色，玩家本人发言 |
| IC | In Character | 角色扮演中，角色发言 |
| 悄悄话 | Whisper | 只有特定人能看到的消息 |
| 隐骰 | Hidden Roll | 只有投骰人和主持人能看到的骰子结果 |
| 骰子宏 | Dice Macro | 预定义的骰子表达式 |
| iForm | Inline Form | 嵌入频道的交互表单 |
| 便签 | Sticky Note | 频道顶部的公告区域 |
| 导出 | Export | 将聊天记录导出为文件 |
| Bot | Bot | 自动化机器人账号 |
