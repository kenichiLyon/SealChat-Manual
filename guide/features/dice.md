---
title: 骰子与跑团工具
description: 骰子表达式、骰子宏、托盘与隐骰
---

# 骰子与跑团工具

SealChat 内置强大的骰子引擎，支持复杂的骰子表达式。

## 基础骰子命令

在消息中输入骰子命令，发送后自动求值：

| 命令 | 说明 | 示例结果 |
| ------ | ------ | ---------- |
| `.r d20` | 投一个 20 面骰 | 掷骰: d20 = 15 |
| `.r 2d6` | 投两个 6 面骰 | 掷骰: 2d6 = 7 (3+4) |
| `.r d20+5` | 投 d20 加 5 | 掷骰: d20+5 = 18 (13+5) |
| `.r 3d6k2` | 投 3d6 保留最高 2 个 | 掷骰: 3d6k2 = 9 (5+4) |
| `.r 4d6kl3` | 投 4d6 保留最低 3 个 | 掷骰: 4d6kl3 = 6 (1+2+3) |

## 高级骰子表达式

**算术运算**：

```text
.r (d20+5)*2
.r d20+d6+3
.r 2d6+1d8-2
```

**保留/丢弃规则**：

- `k` 或 `kh`：保留最高（Keep Highest）
- `kl`：保留最低（Keep Lowest）
- `d` 或 `dl`：丢弃最低（Drop Lowest）
- `dh`：丢弃最高（Drop Highest）

```text
.r 4d6dl1    // 投4d6，丢弃最低1个（常用于D&D属性生成）
.r 2d20kh1   // 投2d20，保留最高1个（优势骰）
.r 2d20kl1   // 投2d20，保留最低1个（劣势骰）
```

**重投规则**：

```text
.r 4d6r1     // 投4d6，1点重投
.r 4d6ro1    // 投4d6，1点重投一次
```

**爆炸骰**：

```text
.r 4d6!      // 投4d6，最大值爆炸（继续投）
.r 4d6!>5    // 投4d6，大于5爆炸
```

## 骰子宏

骰子宏是预定义的骰子表达式，方便快速使用。

**查看可用宏**：

- 在频道设置中查看已配置的骰子宏

**使用宏**：

```text
.r 宏名称
.r 攻击骰
.r 伤害骰
```

**创建宏（管理员）**：

1. 进入频道设置
2. 选择"骰子宏管理"
3. 点击"创建宏"
4. 输入宏名称和表达式

**宏示例**：

```yaml
攻击骰: d20+7       # 攻击检定
伤害骰: 2d6+4       # 伤害骰
豁免骰: d20+3       # 豁免检定
先攻骰: d20+2       # 先攻检定
```

## 骰子托盘

骰子托盘提供快捷掷骰与历史记录管理：

- 一键选择常见面数（d4/d6/d8/d10/d12/d20/d100）
- 支持数量、修正值与原因说明
- 记录掷骰历史，支持收藏常用表达式
- 支持对历史表达式进行微调

## 隐骰

隐骰的结果只有投骰人和主持人能看到。

**使用方法**：

```text
.rh d20+5    // 隐骰
```

**显示效果**：

- 其他玩家只能看到"某某进行了一次隐骰"
- 投骰人和主持人可以看到完整结果

**使用场景**：

- 主持人的 NPC 检定
- 需要保密的结果
- 陷阱/感知检定
